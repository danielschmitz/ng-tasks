import{$a as te,Ba as K,Ea as w,Ga as v,Ha as W,Ja as X,Na as Y,Q as H,T as O,U as P,W as b,X as Q,Ya as Z,_a as ee,ab as ie,bb as ae,cb as oe,db as ne,eb as y,fb as re,i as F,qa as S,ra as $,sa as q,ta as N,ua as B,va as j,wa as z,xa as G,ya as U,za as J}from"./chunk-EV6GQRX2.js";import{Ib as a,Jb as o,Kb as s,Lb as f,Mb as u,Ob as x,Rb as d,Tb as V,Wb as A,Yb as h,Zb as D,_b as M,ab as m,bb as I,cc as r,dc as g,fa as C,hc as L,mb as _,na as T,oa as k,sb as c,yb as p}from"./chunk-ZOOPM5QC.js";var E=class e{constructor(t,i){this.dialogRef=t;this.data=i}onConfirm(){this.dialogRef.close(!0)}onCancel(){this.dialogRef.close(!1)}static \u0275fac=function(i){return new(i||e)(I(ee),I(te))};static \u0275cmp=_({type:e,selectors:[["app-confirm-dialog"]],decls:10,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions","","align","end"],["mat-button","",3,"click"],["mat-flat-button","","color","primary",3,"click"]],template:function(i,n){i&1&&(a(0,"h2",0),r(1,"Confirm"),o(),a(2,"div",1)(3,"p"),r(4),o()(),a(5,"div",2)(6,"button",3),d("click",function(){return n.onCancel()}),r(7,"Cancel"),o(),a(8,"button",4),d("click",function(){return n.onConfirm()}),r(9,"Ok"),o()()),i&2&&(m(4),g(n.data.question))},dependencies:[y,b,ae,ne,oe],encapsulation:2})};var de=()=>[5,10,20];function fe(e,t){e&1&&(a(0,"th",18),r(1,"Id"),o())}function ue(e,t){if(e&1&&(a(0,"td",19),r(1),o()),e&2){let i=t.$implicit;m(),g(i.id)}}function ge(e,t){e&1&&(a(0,"th",18),r(1,"Name"),o())}function Ce(e,t){if(e&1&&(a(0,"td",20),r(1),o()),e&2){let i=t.$implicit;m(),g(i.name)}}function _e(e,t){e&1&&s(0,"th",18)}function he(e,t){if(e&1&&(a(0,"td",21)(1,"button",22)(2,"mat-icon"),r(3,"edit"),o()()()),e&2){let i=t.$implicit;m(),A("routerLink","/categories/edit/",i.id,"")}}function De(e,t){e&1&&s(0,"th",18)}function Me(e,t){if(e&1){let i=x();a(0,"td",21)(1,"button",23),d("click",function(){let l=T(i).$implicit,R=V();return k(R.onDeleteClick(l.id))}),a(2,"mat-icon"),r(3,"delete"),o()()()}}function be(e,t){e&1&&s(0,"tr",24)}function Se(e,t){e&1&&s(0,"tr",25)}var le=class e{service=C(re);snak=C(Y);dialog=C(ie);categories$=this.service.getAll();categories=[];loading=!1;displayedColumns=["id","name","actionEdit","actionDelete"];paginator;sort;table;dataSource=new K([]);ngOnInit(){this.fetchCategories()}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}fetchCategories(){this.loading=!0,this.categories$.subscribe({next:t=>{this.dataSource.data=t,this.loading=!1},error:()=>{this.loading=!1,this.snak.open("Error loading categories")}})}onDeleteClick(t){let i=this.dialog.open(E,{data:{question:"Delete this category?"}}).afterClosed().subscribe(n=>{n?this.service.delete(t).subscribe(()=>{this.categories$=this.service.getAll(),this.fetchCategories()}):console.log("Usu\xE1rio cancelou.")})}applyFilter(t){let i=t.target.value;this.dataSource.filter=i.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=_({type:e,selectors:[["app-categories"]],viewQuery:function(i,n){if(i&1&&(h(w,5),h(v,5),h(S,5)),i&2){let l;D(l=M())&&(n.paginator=l.first),D(l=M())&&(n.sort=l.first),D(l=M())&&(n.table=l.first)}},decls:28,vars:7,consts:[["input",""],[1,"toolbar"],[1,"spacer"],["mat-flat-button","","routerLink","/categories/new"],["matInput","",3,"keyup"],[3,"loading"],["mat-table","","matSort","","aria-label","Elements",1,"full-width-table",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-cell","","width","100%",4,"matCellDef"],["matColumnDef","actionEdit"],["mat-cell","","class","noMarginPadding",4,"matCellDef"],["matColumnDef","actionDelete"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSize","pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-cell","","width","100%"],["mat-cell","",1,"noMarginPadding"],["mat-icon-button","","aria-label","Edit",3,"routerLink"],["mat-icon-button","","aria-label","Edit",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,n){if(i&1){let l=x();a(0,"div",1)(1,"h2"),r(2,"Categories"),o(),s(3,"div",2),a(4,"button",3),r(5,"New"),o()(),a(6,"mat-form-field")(7,"mat-label"),r(8,"Filter"),o(),a(9,"input",4,0),d("keyup",function(me){return T(l),k(n.applyFilter(me))}),o()(),a(11,"app-loading",5)(12,"table",6),f(13,7),c(14,fe,2,0,"th",8)(15,ue,2,1,"td",9),u(),f(16,10),c(17,ge,2,0,"th",8)(18,Ce,2,1,"td",11),u(),f(19,12),c(20,_e,1,0,"th",8)(21,he,4,2,"td",13),u(),f(22,14),c(23,De,1,0,"th",8)(24,Me,4,0,"td",13),u(),c(25,be,1,0,"tr",15)(26,Se,1,0,"tr",16),o(),s(27,"mat-paginator",17),o()}i&2&&(m(11),p("loading",n.loading),m(),p("dataSource",n.dataSource),m(13),p("matHeaderRowDef",n.displayedColumns),m(),p("matRowDefColumns",n.displayedColumns),m(),p("pageSize",5)("pageSizeOptions",L(6,de)))},dependencies:[y,b,Q,X,F,O,H,P,Z,S,q,z,N,$,G,B,j,U,J,w,v,W],encapsulation:2})};export{le as CategoriesComponent};
