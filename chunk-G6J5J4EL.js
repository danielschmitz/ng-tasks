import{a as oe}from"./chunk-3UBSA5XU.js";import{a as re}from"./chunk-BBMU7JLA.js";import"./chunk-VCR3DY3D.js";import{d as H}from"./chunk-WF2BA3OG.js";import{l as N,m as B,n as U,r as ie,v as ne,w as ae}from"./chunk-FAZAPXBE.js";import{a as z}from"./chunk-7NHJSWUD.js";import"./chunk-MW6LRQ77.js";import{a as b,b as j,c as G,d as J,e as K,f as W,g as X,h as Y,i as Z,j as ee,l as I,o as y,q as E,r as te}from"./chunk-WWOF3X5T.js";import{u as O,z as q}from"./chunk-45AOXZM7.js";import"./chunk-63ELC5ES.js";import{g as P}from"./chunk-EZTHPUAS.js";import{ca as F,da as L,ka as A}from"./chunk-3RQUDV4Z.js";import"./chunk-HU7WFQWJ.js";import{Db as Q,Ib as a,Jb as o,Kb as u,L as v,Lb as d,Mb as p,Ob as T,Rb as k,Tb as C,Wb as V,Yb as S,Zb as x,_b as D,ab as l,cc as s,dc as g,fa as M,hc as R,mb as $,na as f,oa as h,sb as m,yb as c}from"./chunk-T4MBMAI6.js";var se=()=>[5,10,20];function me(e,i){if(e&1){let t=T();a(0,"th",26)(1,"mat-checkbox",27),k("change",function(n){f(t);let _=C();return h(n?_.toggleAllRows():null)}),o()()}if(e&2){let t=C();l(),c("checked",t.selection.hasValue()&&t.isAllSelected())("indeterminate",t.selection.hasValue()&&!t.isAllSelected())}}function ce(e,i){if(e&1){let t=T();a(0,"td",28)(1,"mat-checkbox",29),k("click",function(n){return f(t),h(n.stopPropagation())})("change",function(n){let _=f(t).$implicit,w=C();return h(n?w.selection.toggle(_):null)}),o()()}if(e&2){let t=i.$implicit,r=C();l(),c("checked",r.selection.isSelected(t))}}function de(e,i){e&1&&(a(0,"th",30),s(1,"Id"),o())}function pe(e,i){if(e&1&&(a(0,"td",31),s(1),o()),e&2){let t=i.$implicit;l(),g(t.id)}}function _e(e,i){e&1&&(a(0,"th",30),s(1,"Name"),o())}function ue(e,i){if(e&1&&(a(0,"td",32),s(1),o()),e&2){let t=i.$implicit;l(),g(t.name)}}function fe(e,i){e&1&&(a(0,"th",30),s(1,"Description"),o())}function he(e,i){if(e&1&&(a(0,"td",33),s(1),o()),e&2){let t=i.$implicit;l(),g(t.description)}}function Ce(e,i){e&1&&(a(0,"th",30),s(1,"Category"),o())}function ke(e,i){if(e&1&&(a(0,"td",32),s(1),o()),e&2){let t=i.$implicit;l(),g(t.category)}}function Te(e,i){e&1&&u(0,"th",30)}function ge(e,i){if(e&1&&(a(0,"td",34)(1,"button",35)(2,"mat-icon"),s(3,"edit"),o()()()),e&2){let t=i.$implicit;l(),V("routerLink","/tasks/edit/",t.id,"")}}function we(e,i){e&1&&u(0,"th",30)}function Se(e,i){if(e&1){let t=T();a(0,"td",34)(1,"button",36),k("click",function(){let n=f(t).$implicit,_=C();return h(_.onDeleteClick(n.id))}),a(2,"mat-icon"),s(3,"delete"),o()()()}}function xe(e,i){e&1&&u(0,"tr",37)}function De(e,i){e&1&&u(0,"tr",38)}function be(e,i){if(e&1){let t=T();a(0,"th",26)(1,"mat-checkbox",27),k("change",function(n){f(t);let _=C(2);return h(n?_.toggleAllRowsDone():null)}),o()()}if(e&2){let t=C(2);l(),c("checked",t.selectionDone.hasValue()&&t.isAllSelectedDone())("indeterminate",t.selectionDone.hasValue()&&!t.isAllSelectedDone())}}function ye(e,i){if(e&1){let t=T();a(0,"td",28)(1,"mat-checkbox",29),k("click",function(n){return f(t),h(n.stopPropagation())})("change",function(n){let _=f(t).$implicit,w=C(2);return h(n?w.selectionDone.toggle(_):null)}),o()()}if(e&2){let t=i.$implicit,r=C(2);l(),c("checked",r.selectionDone.isSelected(t))}}function Ee(e,i){e&1&&(a(0,"th",30),s(1,"Id"),o())}function ve(e,i){if(e&1&&(a(0,"td",31),s(1),o()),e&2){let t=i.$implicit;l(),g(t.id)}}function Me(e,i){e&1&&(a(0,"th",30),s(1,"Name"),o())}function Ve(e,i){if(e&1&&(a(0,"td",32),s(1),o()),e&2){let t=i.$implicit;l(),g(t.name)}}function Re(e,i){e&1&&(a(0,"th",30),s(1,"Description"),o())}function Ae(e,i){if(e&1&&(a(0,"td",33),s(1),o()),e&2){let t=i.$implicit;l(),g(t.description)}}function Ie(e,i){e&1&&(a(0,"th",30),s(1,"Category"),o())}function $e(e,i){if(e&1&&(a(0,"td",32),s(1),o()),e&2){let t=i.$implicit;l(),g(t.category)}}function Qe(e,i){e&1&&u(0,"th",30)}function He(e,i){if(e&1&&(a(0,"td",34)(1,"button",35)(2,"mat-icon"),s(3,"edit"),o()()()),e&2){let t=i.$implicit;l(),V("routerLink","/tasks/edit/",t.id,"")}}function Fe(e,i){e&1&&u(0,"th",30)}function Le(e,i){if(e&1){let t=T();a(0,"td",34)(1,"button",36),k("click",function(){let n=f(t).$implicit,_=C(2);return h(_.onDeleteClick(n.id))}),a(2,"mat-icon"),s(3,"delete"),o()()()}}function Pe(e,i){e&1&&u(0,"tr",37)}function Oe(e,i){e&1&&u(0,"tr",38)}function qe(e,i){if(e&1){let t=T();u(0,"hr"),a(1,"app-loading",5)(2,"table",6),d(3,7),m(4,be,2,2,"th",8)(5,ye,2,1,"td",9),p(),d(6,10),m(7,Ee,2,0,"th",11)(8,ve,2,1,"td",12),p(),d(9,13),m(10,Me,2,0,"th",11)(11,Ve,2,1,"td",14),p(),d(12,15),m(13,Re,2,0,"th",11)(14,Ae,2,1,"td",16),p(),d(15,17),m(16,Ie,2,0,"th",11)(17,$e,2,1,"td",14),p(),d(18,18),m(19,Qe,1,0,"th",11)(20,He,4,2,"td",19),p(),d(21,20),m(22,Fe,1,0,"th",11)(23,Le,4,0,"td",19),p(),m(24,Pe,1,0,"tr",21)(25,Oe,1,0,"tr",22),o(),u(26,"mat-paginator",23),o(),a(27,"button",39),k("click",function(){f(t);let n=C();return h(n.onMarkAsUnDoneClick())}),s(28,"Mark as undone"),o()}if(e&2){let t=C();l(),c("loading",t.loadingDone),l(),c("dataSource",t.dataSourceDone),l(22),c("matHeaderRowDef",t.displayedColumns),l(),c("matRowDefColumns",t.displayedColumns),l(),c("pageSize",5)("pageSizeOptions",R(7,se)),l(),c("disabled",!t.selectionDone.hasValue())}}var le=class e{service=M(re);snak=M(N);dialog=M(ie);tasks$=this.service.getAll();doneTasks$=this.service.getAllDone();tasks=[];loading=!1;loadingDone=!1;showDoneTasks=!1;displayedColumns=["select","id","name","category","description","actionEdit","actionDelete"];paginator;sort;table;paginatorDone;sortDone;tableDone;dataSource=new I([]);selection=new A(!0,[]);dataSourceDone=new I([]);selectionDone=new A(!0,[]);ngOnInit(){this.fetchTasks(),this.fetchTasksDone()}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator,this.dataSourceDone.sort=this.sortDone,this.dataSourceDone.paginator=this.paginatorDone}fetchTasks(){this.loading=!0,this.tasks$.subscribe({next:i=>{this.dataSource.data=i,this.loading=!1},error:()=>{this.loading=!1,this.snak.open("Error loading tasks")}})}fetchTasksDone(){this.loadingDone=!0,this.doneTasks$.subscribe({next:i=>{this.dataSourceDone.data=i,this.loadingDone=!1},error:()=>{this.loadingDone=!1,this.snak.open("Error loading tasks")}})}onDeleteClick(i){let t=this.dialog.open(oe,{data:{question:"Delete this task?"}}).afterClosed().subscribe(r=>{r&&(this.loading=!0,this.service.delete(i).pipe(v(()=>this.loading=!1)).subscribe({next:()=>{this.tasks$=this.service.getAll(),this.fetchTasks()},error:n=>{this.snak.open(n.message.message)}}))})}applyFilter(i){let t=i.target.value;this.dataSource.filter=t.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}isAllSelected(){let i=this.selection.selected.length,t=this.dataSource.data.length;return i===t}isAllSelectedDone(){let i=this.selectionDone.selected.length,t=this.dataSourceDone.data.length;return i===t}toggleAllRows(){if(this.isAllSelected()){this.selection.clear();return}this.selection.select(...this.dataSource.data)}toggleAllRowsDone(){if(this.isAllSelectedDone()){this.selectionDone.clear();return}this.selectionDone.select(...this.dataSourceDone.data)}onMarkAsDoneClick(){this.loading=!0,this.service.markAsDone(this.selection.selected).pipe(v(()=>this.loading=!1)).subscribe({next:()=>{this.fetchTasks(),this.fetchTasksDone()},error:i=>{this.snak.open(i.error.message)}})}onMarkAsUnDoneClick(){this.loadingDone=!0,this.service.markAsUnDone(this.selectionDone.selected).pipe(v(()=>this.loadingDone=!1)).subscribe({next:()=>{this.fetchTasks(),this.fetchTasksDone()},error:i=>{this.snak.open(i.error.message)}})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=$({type:e,selectors:[["app-tasks"]],viewQuery:function(t,r){if(t&1&&(S(y,5),S(E,5),S(b,5),S(y,5),S(E,5),S(b,5)),t&2){let n;x(n=D())&&(r.paginator=n.first),x(n=D())&&(r.sort=n.first),x(n=D())&&(r.table=n.first),x(n=D())&&(r.paginatorDone=n.first),x(n=D())&&(r.sortDone=n.first),x(n=D())&&(r.tableDone=n.first)}},decls:44,vars:9,consts:[["input",""],[1,"toolbar"],[1,"spacer"],["mat-flat-button","","routerLink","/tasks/new"],["matInput","",3,"keyup"],[3,"loading"],["mat-table","","matSort","","aria-label","Elements",1,"full-width-table",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","width","50px",4,"matCellDef"],["matColumnDef","name"],["mat-cell","","width","20%",4,"matCellDef"],["matColumnDef","description"],["mat-cell","","width","50%",4,"matCellDef"],["matColumnDef","category"],["matColumnDef","actionEdit"],["mat-cell","","class","noMarginPadding","width","50px",4,"matCellDef"],["matColumnDef","actionDelete"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSize","pageSizeOptions"],["mat-flat-button","","color","primary",3,"click","disabled"],[3,"change"],["mat-header-cell",""],[3,"change","checked","indeterminate"],["mat-cell",""],[3,"click","change","checked"],["mat-header-cell","","mat-sort-header",""],["mat-cell","","width","50px"],["mat-cell","","width","20%"],["mat-cell","","width","50%"],["mat-cell","","width","50px",1,"noMarginPadding"],["mat-icon-button","","aria-label","Edit",3,"routerLink"],["mat-icon-button","","aria-label","Edit",3,"click"],["mat-header-row",""],["mat-row",""],["mat-flat-button","","color","primary","click","markAsDone",3,"click","disabled"]],template:function(t,r){if(t&1){let n=T();a(0,"div",1)(1,"h2"),s(2,"Tasks"),o(),u(3,"div",2),a(4,"button",3),s(5,"New"),o()(),a(6,"mat-form-field")(7,"mat-label"),s(8,"Filter"),o(),a(9,"input",4,0),k("keyup",function(w){return f(n),h(r.applyFilter(w))}),o()(),a(11,"app-loading",5)(12,"table",6),d(13,7),m(14,me,2,2,"th",8)(15,ce,2,1,"td",9),p(),d(16,10),m(17,de,2,0,"th",11)(18,pe,2,1,"td",12),p(),d(19,13),m(20,_e,2,0,"th",11)(21,ue,2,1,"td",14),p(),d(22,15),m(23,fe,2,0,"th",11)(24,he,2,1,"td",16),p(),d(25,17),m(26,Ce,2,0,"th",11)(27,ke,2,1,"td",14),p(),d(28,18),m(29,Te,1,0,"th",11)(30,ge,4,2,"td",19),p(),d(31,20),m(32,we,1,0,"th",11)(33,Se,4,0,"td",19),p(),m(34,xe,1,0,"tr",21)(35,De,1,0,"tr",22),o(),u(36,"mat-paginator",23),o(),a(37,"button",24),k("click",function(){return f(n),h(r.onMarkAsDoneClick())}),s(38,"Mark as done"),o(),u(39,"br")(40,"br"),a(41,"mat-slide-toggle",25),k("change",function(w){return f(n),h(r.showDoneTasks=w.checked)}),s(42,"Show Done Tasks"),o(),m(43,qe,29,8)}t&2&&(l(11),c("loading",r.loading),l(),c("dataSource",r.dataSource),l(22),c("matHeaderRowDef",r.displayedColumns),l(),c("matRowDefColumns",r.displayedColumns),l(),c("pageSize",5)("pageSizeOptions",R(8,se)),l(),c("disabled",!r.selection.hasValue()),l(6),Q(r.showDoneTasks?43:-1))},dependencies:[ae,F,L,P,H,q,O,z,B,U,b,G,X,J,j,Y,K,W,Z,ee,y,E,te,ne],encapsulation:2})};export{le as TasksComponent};
