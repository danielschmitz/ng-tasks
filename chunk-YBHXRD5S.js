import{a as v}from"./chunk-DWLR34MP.js";import{a as C}from"./chunk-BBMU7JLA.js";import"./chunk-VCR3DY3D.js";import{a as f,c as u}from"./chunk-WF2BA3OG.js";import{l as h,n as g,w as T}from"./chunk-FAZAPXBE.js";import"./chunk-7NHJSWUD.js";import"./chunk-MW6LRQ77.js";import"./chunk-WWOF3X5T.js";import"./chunk-45AOXZM7.js";import"./chunk-63ELC5ES.js";import"./chunk-EZTHPUAS.js";import"./chunk-3RQUDV4Z.js";import"./chunk-HU7WFQWJ.js";import{Ib as p,Jb as m,Rb as c,ab as s,cc as k,d as o,fa as i,mb as d,s as n,yb as r}from"./chunk-T4MBMAI6.js";var y=class l{route=i(f);router=i(u);service=i(C);id;task={name:"",description:"",done:!1};loading=!1;snak=i(h);constructor(){this.id=this.route.snapshot.paramMap.get("id"),this.fetchTasks()}fetchTasks(){return o(this,null,function*(){if(this.loading=!0,this.id===null)throw new Error("No id provided");try{this.task=yield n(this.service.getById(this.id))}catch(e){this.snak.open(e.error.message)}finally{this.loading=!1}})}onBackClick(){this.router.navigate(["/tasks"])}onSubmitClick(e){return o(this,null,function*(){this.loading=!0;try{yield n(this.service.update(this.id,e)),this.router.navigate(["/tasks"])}catch(t){this.snak.open(t.error.message)}finally{this.loading=!1}})}static \u0275fac=function(t){return new(t||l)};static \u0275cmp=d({type:l,selectors:[["app-edit-task"]],decls:4,vars:2,consts:[[3,"loading"],[3,"onSubmit","onBack","task"]],template:function(t,a){t&1&&(p(0,"h2"),k(1,"Edit Task"),m(),p(2,"app-loading",0)(3,"app-form-task",1),c("onSubmit",function(E){return a.onSubmitClick(E)})("onBack",function(){return a.onBackClick()}),m()()),t&2&&(s(2),r("loading",a.loading),s(),r("task",a.task))},dependencies:[T,g,v],encapsulation:2})};export{y as EditTaskComponent};
